{"name": "密码错误，登录失败", "status": "broken", "statusDetails": {"message": "NameError: name 'source' is not defined", "trace": "self = <test_sys_login.TestSysLogin object at 0x10b86b220>\ndatas = {'allureInfo': {'description': '管理后台登录功能测试', 'epic': '业务运营支撑系统', 'feature': '登录', 'story': '用户登录', ...}, 'requests': [...y(batchNo)}', 'code': '${FileReadUtil(extract.yaml).read_yaml_key(code)}', 'passwd': '00000'}, 'method': 'post', ...}]}\n\n    @pytest.mark.parametrize(\"datas\",YamlUtil().get_testcases(filepath))\n    def test_sys_login_success_01(self, datas: list):\n        process_datas = []\n        if isinstance(datas, dict):\n            process_datas.append(datas)\n        else:\n            process_datas = datas\n        for data in process_datas:\n            ProcessCaseInfo().process_allure_info(data['allureInfo'])\n            for req in data[\"requests\"]:\n                with allure.step(req[\"stepName\"]):\n>                   res = ProcessCaseInfo().handle_case(req, FileReadUtil(\"./pytest.ini\").read_conf(\"test\"))\n\ntestcase/login/test_sys_login.py:40: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ncommon/ProcessCaseInfo.py:117: in handle_case\n    url = conf['host'] + self.process_data(step.pop(\"url\"))\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <common.ProcessCaseInfo.ProcessCaseInfo object at 0x10bd10ca0>\ndata1 = '/service/service-basic/image/${LoginService().get_curr_timestamp()}'\n\n    def process_data(self, data1):\n        \"\"\"\n        将字符串中的函数替换为对应字符串\n        :param data:\n        :return:\n        \"\"\"\n        if data1 is None:\n            data = \"\"\n        data=str(data1)\n        if \"${\" and \"}\" in data:\n            for i in range(data.count(\"${\")):\n>               if re.match(\"(.*)\\${(.*)\",source):\nE               NameError: name 'source' is not defined\n\ncommon/ProcessCaseInfo.py:47: NameError"}, "description": "管理后台登录功能测试", "steps": [{"name": "1-获取图片验证码", "status": "broken", "statusDetails": {"message": "NameError: name 'source' is not defined\n", "trace": "  File \"/Users/jijia/PycharmProjects/BzTestPy/testcase/login/test_sys_login.py\", line 40, in test_sys_login_success_01\n    res = ProcessCaseInfo().handle_case(req, FileReadUtil(\"./pytest.ini\").read_conf(\"test\"))\n  File \"/Users/jijia/PycharmProjects/BzTestPy/common/ProcessCaseInfo.py\", line 117, in handle_case\n    url = conf['host'] + self.process_data(step.pop(\"url\"))\n  File \"/Users/jijia/PycharmProjects/BzTestPy/common/ProcessCaseInfo.py\", line 47, in process_data\n    if re.match(\"(.*)\\${(.*)\",source):\n"}, "start": 1721179435711, "stop": 1721179435711}], "attachments": [{"name": "log", "source": "4e6bdd5e-2d03-48c9-9e71-e1e3957b90c6-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "datas", "value": "{'allureInfo': {'epic': '业务运营支撑系统', 'feature': '登录', 'description': '管理后台登录功能测试', 'story': '用户登录', 'title': '密码错误，登录失败'}, 'requests': [{'stepName': '1-获取图片验证码', 'url': '/service/service-basic/image/${LoginService().get_curr_timestamp()}', 'method': 'get', 'headers': '${ProcessCaseInfo().process_header()}', 'validate': [{'exist': ['${LoginService().get_redis_verifycode()}', 'exist']}, {'eq': ['$.status_code', '200']}], 'extract': None}, {'stepName': '2-使用验证码登录', 'url': '/service/service-basic/account/login', 'method': 'post', 'headers': '${ProcessCaseInfo().process_header()}', 'json': {'account': '${LoginService().get_account()}', 'batchNo': '${FileReadUtil(extract.yaml).read_yaml_key(batchNo)}', 'code': '${FileReadUtil(extract.yaml).read_yaml_key(code)}', 'passwd': '00000'}, 'validate': [{'eq': ['$.status_code', '200']}, {'eq': ['$.text.code', '500']}, {'eq': ['$.text.message', '账号或密码输入错误']}], 'extract': None}]}"}], "start": 1721179435711, "stop": 1721179435712, "uuid": "9b054e40-4740-4630-9344-a732b705b55a", "historyId": "ef257845dc5e73ab6e63135c131a0eca", "testCaseId": "fbd6fb240e8bcd37ce32c08b2e02789b", "fullName": "testcase.login.test_sys_login.TestSysLogin#test_sys_login_success_01", "labels": [{"name": "epic", "value": "业务运营支撑系统"}, {"name": "feature", "value": "登录"}, {"name": "story", "value": "用户登录"}, {"name": "parentSuite", "value": "testcase.login"}, {"name": "suite", "value": "test_sys_login"}, {"name": "subSuite", "value": "TestSysLogin"}, {"name": "host", "value": "jijiadeMacBook-Pro.local"}, {"name": "thread", "value": "48111-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcase.login.test_sys_login"}]}